!function(){"use strict";var e={960:function(e,t,r){e.exports=r.p+"df100efc54d4645073d7.jpg"},656:function(e,t,r){e.exports=r.p+"8edfe6cd78e39aafc871.jpg"},822:function(e,t,r){e.exports=r.p+"44e6fede87f55e5327cc.jpg"},328:function(e,t,r){e.exports=r.p+"e463b225f0897d749d63.jpg"},994:function(e,t,r){e.exports=r.p+"70aac30a40409c4dbc71.jpg"},339:function(e,t,r){e.exports=r.p+"2e37fd0c260a298af732.jpg"}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,r),o.exports}r.m=e,r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.b=document.baseURI||self.location.href,function(){const e=[{name:"Yosemite Valley",link:new URL(r(339),r.b)},{name:"Lake Louise",link:new URL(r(822),r.b)},{name:"Bald Mountains",link:new URL(r(960),r.b)},{name:"Latemar",link:new URL(r(328),r.b)},{name:"Vanoise National Park",link:new URL(r(994),r.b)},{name:"Lago di Braies",link:new URL(r(656),r.b)}],t={formSelector:".modal__form",inputSelector:".modal__form-input",submitButtonSelector:".modal__form-button",inactiveButtonClass:"modal__form-button_disabled",inputErrorClass:"modal__form-input_type_error",errorClass:"modal__error_visible"};function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class n{constructor(e,t){let{data:r,handleCardClick:n,deleteCardModal:o}=e;i(this,"_handleHeartIcon",(()=>{this._cardHeartButton.classList.toggle("card__heart-button-active")})),i(this,"_handleDeleteCard",(()=>{this._deleteCardModal.openModal(),this._deleteCardModal._handleFormSubmit=()=>{this._handleDeleteConfirm(this._cardElement)}})),i(this,"_handlePreviewPicture",(()=>{this._handleCardClick.openModal({link:this._link,name:this._name})})),this._name=r.name,this._link=r.link,this._cardSelector=t,this._handleCardClick=n,this._deleteCardModal=o,this._cardTemplate=document.querySelector(this._cardSelector).content.firstElementChild,this._handleDeleteConfirm=this._handleDeleteConfirm.bind(this)}_handleDeleteConfirm(e){e.remove(),this._deleteCardModal.closeModal()}_setEventListeners(){this._cardHeartButton.addEventListener("click",this._handleHeartIcon),this._cardDeleteButton.addEventListener("click",this._handleDeleteCard),this._cardImage.addEventListener("click",this._handlePreviewPicture)}getView(){return this._cardElement=this._cardTemplate.cloneNode(!0),this._cardTitle=this._cardElement.querySelector(".card__title"),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardHeartButton=this._cardElement.querySelector(".card__heart-button"),this._cardDeleteButton=this._cardElement.querySelector(".card__delete-button"),this._setEventListeners(),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardTitle.textContent=this._name,this._cardElement}}class o{constructor(e,t){this._form=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._form.querySelector("#"+e.id+"-error");e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector("#"+e.id+"-error");e.classList.remove(this._inputErrorClass),t.textContent=" ",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}toggleButtonState(){if(this._hasInvalidInput())return this._submitButton.classList.add(this._inactiveButtonClass),void(this._submitButton.disabled=!0);this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_setEventListeners(){this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class s{constructor(e){this._popupElement=document.querySelector(e),this._exitButtonElement=this._popupElement.querySelector(".modal__exit-button"),this._handleEscClose=this._handleEscClose.bind(this)}openModal(){this._popupElement.classList.add("modal__opened"),document.addEventListener("keyup",this._handleEscClose)}closeModal(){this._popupElement.classList.remove("modal__opened"),document.removeEventListener("keyup",this._handleEscClose)}setEventListeners(){this._popupElement.addEventListener("mousedown",this._handleOutsideClose.bind(this)),this._exitButtonElement.addEventListener("click",this.closeModal.bind(this))}_handleEscClose(e){"Escape"==e.key&&this.closeModal()}_handleOutsideClose(e){e.target.classList.contains("modal")&&this.closeModal()}}class l extends s{constructor(e,t){var r,i,n;super(e),r=this,n=e=>{e.preventDefault(),this._handleFormSubmit(this.getInputValues())},(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(i="_handleSubmit"))in r?Object.defineProperty(r,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[i]=n,this._handleFormSubmit=t,this._modalForm=this._popupElement.querySelector(".modal__form"),this._modalFormInputs=this._popupElement.querySelectorAll(".modal__form-input"),this._modalFormButton=this._popupElement.querySelector(".modal__form-button")}setEventListeners(){super.setEventListeners(),this._modalForm.addEventListener("submit",this._handleSubmit)}getInputValues(){const e={};return this._modalFormInputs.forEach((t=>e[t.name]=t.value)),e}closeModal(){super.closeModal(),this._modalForm.reset()}}const a=new class extends s{constructor(e){super(e),this._cardPreviewImage=this._popupElement.querySelector(".modal__preview-image"),this._cardPreviewTitle=this._popupElement.querySelector(".modal__preview-title")}openModal(e){let{link:t,name:r}=e;this._cardPreviewImage.src=t,this._cardPreviewImage.alt=r,this._cardPreviewTitle.textContent=r,super.openModal()}}("#image-preview");function d(e,t,r){const i=new l("#confirmation",(e=>{e.remove(),i.closeModal()}));return i.setEventListeners(),new n({data:e,handleCardClick:t,deleteCardModal:i},r).getView()}a.setEventListeners();const c=new class{constructor(e,t){let{items:r,renderer:i}=e;this._items=r,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._items.forEach(this._renderer)}addItems(e){this._container.prepend(e)}}({items:e,renderer:e=>{const t=d(e,a,"#card-template");c.addItems(t)}},".cards__list");c.renderItems();const u=document.querySelector(".profile__edit-button"),_=document.querySelector(".profile__add-button"),m=document.querySelector(".profile__image-edit"),h=document.querySelector("#editProfileForm"),p=document.querySelector("#profileName"),f=document.querySelector("#profileDescription"),v=new class{constructor(e,t){this._profileNameElement=document.querySelector(e),this._profileDescriptionElement=document.querySelector(t)}setProfileInfo(e,t){this._profileNameElement.textContent=e,this._profileDescriptionElement.textContent=t}getProfileInfo(){return{name:this._profileNameElement.textContent,description:this._profileDescriptionElement.textContent}}}(".profile__title",".profile__description"),E=new o(t,h);E.enableValidation();const b=new l("#profileEdit",(()=>{const e=b.getInputValues(),t=e.name,r=e.description;v.setProfileInfo(t,r),b.closeModal()}));b.setEventListeners(),u.addEventListener("click",(()=>{!function(){const{name:e,description:t}=v.getProfileInfo();p.value=e,f.value=t}(),b.openModal(),E.toggleButtonState()}));const S=new o(t,document.querySelector("#addCardForm"));S.enableValidation();const y=new l("#addCard",(()=>{const e=d(y.getInputValues());c.addItems(e),y.closeModal()}));y.setEventListeners(),_.addEventListener("click",(()=>{y.openModal(),S.toggleButtonState()}));const C=document.querySelector("#profilePictureForm"),g=document.querySelector(".profile__image"),L=document.querySelector(".profile__title");new o(t,C).enableValidation();const w=new l("#changeProfilePicture",(()=>{const e=w.getInputValues().link;g.src=e,g.alt=L.textContent,w.closeModal()}));w.setEventListeners(),m.addEventListener("click",(()=>{w.openModal(),E.toggleButtonState()}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxtQkFFNUIsTUFBTWtFLEVBQXNCLElBQUlwRCxFTHpESCx5QksyRDNCLEtBQ0UsTUFDTTFGLEVBRGM4SSxFQUFvQmhELGlCQUNmOUYsS0FDekI0SSxFQUFlOUYsSUFBTTlDLEVBQ3JCNEksRUFBZTdGLElBQU04RixFQUFZN0YsWUFFakM4RixFQUFvQjNHLFlBQVksSUFJcEMyRyxFQUFvQjFELG9CQUVwQnNDLEVBQXlCckYsaUJBQWlCLFNBQVMsS0FDakR5RyxFQUFvQjFILFlBQ3BCa0gsRUFBcUI5RCxtQkFBbUIsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS1wcm9qZWN0LTgvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLXByb2plY3QtOC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3ByYWN0aWN1bS1wcm9qZWN0LTgvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLXByb2plY3QtOC93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly9wcmFjdGljdW0tcHJvamVjdC04Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0tcHJvamVjdC04Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0tcHJvamVjdC04Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0tcHJvamVjdC04Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLXByb2plY3QtOC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLXByb2plY3QtOC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0tcHJvamVjdC04Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLXByb2plY3QtOC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLXByb2plY3QtOC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4vLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gX193ZWJwYWNrX21vZHVsZXNfXztcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5iID0gZG9jdW1lbnQuYmFzZVVSSSB8fCBzZWxmLmxvY2F0aW9uLmhyZWY7XG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0MTc5OiAwXG59O1xuXG4vLyBubyBjaHVuayBvbiBkZW1hbmQgbG9hZGluZ1xuXG4vLyBubyBwcmVmZXRjaGluZ1xuXG4vLyBubyBwcmVsb2FkZWRcblxuLy8gbm8gSE1SXG5cbi8vIG5vIEhNUiBtYW5pZmVzdFxuXG4vLyBubyBvbiBjaHVua3MgbG9hZGVkXG5cbi8vIG5vIGpzb25wIGZ1bmN0aW9uIiwiY29uc3QgeW9zZW1pdGVWYWxsZXlJbWFnZSA9IG5ldyBVUkwoXHJcbiAgXCIuLi9pbWFnZXMveW9zZW1pdGUtdmFsbGV5LmpwZ1wiLFxyXG4gIGltcG9ydC5tZXRhLnVybFxyXG4pO1xyXG5jb25zdCBsYWtlTG91aXNlSW1hZ2UgPSBuZXcgVVJMKFwiLi4vaW1hZ2VzL2xha2UtbG91aXNlLmpwZ1wiLCBpbXBvcnQubWV0YS51cmwpO1xyXG5jb25zdCBiYWxkTW91bnRhaW5JbWFnZSA9IG5ldyBVUkwoXHJcbiAgXCIuLi9pbWFnZXMvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgaW1wb3J0Lm1ldGEudXJsXHJcbik7XHJcbmNvbnN0IGxhdGVtYXJJbWFnZSA9IG5ldyBVUkwoXCIuLi9pbWFnZXMvbGF0ZW1hci5qcGdcIiwgaW1wb3J0Lm1ldGEudXJsKTtcclxuY29uc3QgdmFub2lzZU5hdGlvbmFsUGFya0ltYWdlID0gbmV3IFVSTChcclxuICBcIi4uL2ltYWdlcy92YW5vaXNlLW5hdGlvbmFsLXBhcmsuanBnXCIsXHJcbiAgaW1wb3J0Lm1ldGEudXJsXHJcbik7XHJcbmNvbnN0IGxhZ29EaUJyYWllc0ltYWdlID0gbmV3IFVSTChcclxuICBcIi4uL2ltYWdlcy9sYWdvLWRpLWJyYWllcy5qcGdcIixcclxuICBpbXBvcnQubWV0YS51cmxcclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IHlvc2VtaXRlVmFsbGV5SW1hZ2UsXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogbGFrZUxvdWlzZUltYWdlLFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IGJhbGRNb3VudGFpbkltYWdlLFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogbGF0ZW1hckltYWdlLFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiB2YW5vaXNlTmF0aW9uYWxQYXJrSW1hZ2UsXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogbGFnb0RpQnJhaWVzSW1hZ2UsXHJcbiAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2Zvcm0taW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm0tYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fZm9ybS1idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2Zvcm0taW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XHJcbiAgY2FyZFNlY3Rpb246IFwiLmNhcmRzX19saXN0XCIsXHJcbiAgY2FyZFRlbXBsYXRlOiBcIiNjYXJkLXRlbXBsYXRlXCIsXHJcbiAgcHJldmlld1BvcHVwOiBcIiNpbWFnZS1wcmV2aWV3XCIsXHJcbiAgcHJvZmlsZU1vZGFsOiBcIiNwcm9maWxlRWRpdFwiLFxyXG4gIGFkZENhcmRNb2RhbDogXCIjYWRkQ2FyZFwiLFxyXG4gIGNvbmZpcm1hdGlvbk1vZGFsOiBcIiNjb25maXJtYXRpb25cIixcclxuICBjaGFuZ2VQcm9maWxlUGljdHVyZU1vZGFsOiBcIiNjaGFuZ2VQcm9maWxlUGljdHVyZVwiLFxyXG4gIHByb2ZpbGVOYW1lOiBcIi5wcm9maWxlX190aXRsZVwiLFxyXG4gIHByb2ZpbGVBYm91dDogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBhcGlCYXNlVXJsID0gXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyXCI7XHJcblxyXG5leHBvcnQgY29uc3QgYXBpUmVxdWVzdE9wdGlvbnMgPSB7XHJcbiAgYXV0aG9yaXphdGlvbjogXCIyMzM3NjBiMi04NjViLTQxOGMtYTk4OC0wYTVkYWFhZjc4NDZcIixcclxuICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG59O1xyXG4iLCJpbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi9Qb3B1cFdpdGhGb3JtXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIGhhbmRsZUNhcmRDbGljaywgZGVsZXRlQ2FyZE1vZGFsIH0sIGNhcmRTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcblxyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5fZGVsZXRlQ2FyZE1vZGFsID0gZGVsZXRlQ2FyZE1vZGFsXHJcblxyXG4gICAgdGhpcy5fY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fY2FyZFNlbGVjdG9yXHJcbiAgICApLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcblxyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ29uZmlybSA9IHRoaXMuX2hhbmRsZURlbGV0ZUNvbmZpcm0uYmluZCh0aGlzKTtcclxuXHJcbiAgfVxyXG5cclxuICAvKlxyXG4gIF9oYW5kbGVEZWxldGVDb25maXJtKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9kZWxldGVDYXJkTW9kYWwuY2xvc2VNb2RhbCgpO1xyXG4gIH1cclxuICAqL1xyXG5cclxuICBcclxuICBfaGFuZGxlRGVsZXRlQ29uZmlybShjYXJkRWxlbWVudCkge1xyXG4gICAgY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9kZWxldGVDYXJkTW9kYWwuY2xvc2VNb2RhbCgpO1xyXG4gIH1cclxuICBcclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy9MaWtlIGJ1dHRvblxyXG4gICAgdGhpcy5fY2FyZEhlYXJ0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVIZWFydEljb24pO1xyXG5cclxuICAgIC8vZGVsZXRlIGJ1dHRvblxyXG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCk7XHJcblxyXG4gICAgLy9tb2RhbCBwcmV2aWV3XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZVByZXZpZXdQaWN0dXJlKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVIZWFydEljb24gPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9jYXJkSGVhcnRCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2hlYXJ0LWJ1dHRvbi1hY3RpdmVcIik7XHJcbiAgfTtcclxuXHJcbiAgLypcclxuICBfaGFuZGxlRGVsZXRlQ2FyZCA9ICgpID0+IHtcclxuICAgIC8vdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9kZWxldGVDYXJkTW9kYWwub3Blbk1vZGFsKCk7XHJcbiAgfTtcclxuICAqL1xyXG5cclxuICBfaGFuZGxlRGVsZXRlQ2FyZCA9ICgpID0+IHtcclxuICAgIHRoaXMuX2RlbGV0ZUNhcmRNb2RhbC5vcGVuTW9kYWwoKTtcclxuICAgIHRoaXMuX2RlbGV0ZUNhcmRNb2RhbC5faGFuZGxlRm9ybVN1Ym1pdCA9ICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ29uZmlybSh0aGlzLl9jYXJkRWxlbWVudCk7XHJcbiAgICB9O1xyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVQcmV2aWV3UGljdHVyZSA9ICgpID0+IHtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljay5vcGVuTW9kYWwoeyBsaW5rOiB0aGlzLl9saW5rLCBuYW1lOiB0aGlzLl9uYW1lIH0pO1xyXG4gIH07XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2NhcmRUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRIZWFydEJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmNhcmRfX2hlYXJ0LWJ1dHRvblwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XHJcblxyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuXHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiNcIiArIGlucHV0RWxlbWVudC5pZCArIFwiLWVycm9yXCJcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiI1wiICsgaW5wdXRFbGVtZW50LmlkICsgXCItZXJyb3JcIlxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiIFwiO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuICF0aGlzLl9pbnB1dEVscy5ldmVyeSgoaW5wdXRFbGVtZW50KSA9PiBpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fZXhpdEJ1dHRvbkVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2V4aXQtYnV0dG9uXCJcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgb3Blbk1vZGFsKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9fb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlTW9kYWwoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX19vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgLy90aGlzLl9tb2RhbEZvcm0ucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIFwibW91c2Vkb3duXCIsXHJcbiAgICAgIHRoaXMuX2hhbmRsZU91dHNpZGVDbG9zZS5iaW5kKHRoaXMpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fZXhpdEJ1dHRvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgXCJjbGlja1wiLFxyXG4gICAgICB0aGlzLmNsb3NlTW9kYWwuYmluZCh0aGlzKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZShldmVudCkge1xyXG4gICAgaWYgKGV2ZW50LmtleSA9PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2VNb2RhbCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhbmRsZU91dHNpZGVDbG9zZShldmVudCkge1xyXG4gICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKSkge1xyXG4gICAgICB0aGlzLmNsb3NlTW9kYWwoKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcblxyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9tb2RhbEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX21vZGFsRm9ybUlucHV0cyA9XHJcbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19mb3JtLWlucHV0XCIpO1xyXG4gICAgdGhpcy5fbW9kYWxGb3JtQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLm1vZGFsX19mb3JtLWJ1dHRvblwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fbW9kYWxGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlU3VibWl0KTtcclxuICB9XHJcblxyXG4gIFxyXG4gIGdldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX21vZGFsRm9ybUlucHV0cy5mb3JFYWNoKFxyXG4gICAgICAoaW5wdXQpID0+IChpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKVxyXG4gICAgKTtcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcbiAgXHJcblxyXG4gIF9oYW5kbGVTdWJtaXQgPSAoZXZ0KSA9PiB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5nZXRJbnB1dFZhbHVlcygpKTtcclxuICB9O1xyXG5cclxuICBjbG9zZU1vZGFsKCkge1xyXG4gICAgc3VwZXIuY2xvc2VNb2RhbCgpO1xyXG4gICAgdGhpcy5fbW9kYWxGb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xyXG5cclxuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCBzZWxlY3RvcnMsIHNldHRpbmdzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuXHJcbi8vY29uc3QgYXBpID0gbmV3IEFwaVxyXG5cclxuY29uc3QgY2FyZFByZXZpZXdQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShzZWxlY3RvcnMucHJldmlld1BvcHVwKTtcclxuY2FyZFByZXZpZXdQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChpdGVtLCBoYW5kbGVDYXJkQ2xpY2ssIGNhcmRTZWxlY3Rvcikge1xyXG4gIGNvbnN0IGRlbGV0ZUNhcmRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gICAgc2VsZWN0b3JzLmNvbmZpcm1hdGlvbk1vZGFsLFxyXG4gICAgKGNhcmRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGNhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICBkZWxldGVDYXJkTW9kYWwuY2xvc2VNb2RhbCgpO1xyXG4gICAgfVxyXG4gICk7XHJcbiAgZGVsZXRlQ2FyZE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIHtcclxuICAgICAgZGF0YTogaXRlbSxcclxuICAgICAgaGFuZGxlQ2FyZENsaWNrOiBoYW5kbGVDYXJkQ2xpY2ssXHJcbiAgICAgIGRlbGV0ZUNhcmRNb2RhbDogZGVsZXRlQ2FyZE1vZGFsLFxyXG4gICAgfSxcclxuICAgIGNhcmRTZWxlY3RvclxyXG4gICk7XHJcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xyXG59XHJcblxyXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogKGRhdGEpID0+IHtcclxuICAgICAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoZGF0YSwgY2FyZFByZXZpZXdQb3B1cCwgc2VsZWN0b3JzLmNhcmRUZW1wbGF0ZSk7XHJcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW1zKGNhcmQpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIHNlbGVjdG9ycy5jYXJkU2VjdGlvblxyXG4pO1xyXG5cclxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuXHJcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVByb2ZpbGUgYnV0dG9uIGVsZW1lbnRzLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbmNvbnN0IHByb2ZpbGVQaWN0dXJlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW1hZ2UtZWRpdFwiKTtcclxuXHJcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tTW9kYWwgUHJvZmlsZSBlbGVtZW50cy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuY29uc3QgbW9kYWxQcm9maWxlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdFByb2ZpbGVGb3JtXCIpO1xyXG5jb25zdCBtb2RhbFByb2ZpbGVOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVOYW1lXCIpO1xyXG5jb25zdCBtb2RhbFByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlRGVzY3JpcHRpb25cIlxyXG4pO1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oc2VsZWN0b3JzLnByb2ZpbGVOYW1lLCBzZWxlY3RvcnMucHJvZmlsZUFib3V0KTtcclxuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgbW9kYWxQcm9maWxlRm9ybSk7XHJcbnByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmZ1bmN0aW9uIGZpbGxQcm9maWxlRm9ybSgpIHtcclxuICBjb25zdCB7IG5hbWUsIGRlc2NyaXB0aW9uIH0gPSB1c2VySW5mby5nZXRQcm9maWxlSW5mbygpO1xyXG4gIG1vZGFsUHJvZmlsZU5hbWVJbnB1dC52YWx1ZSA9IG5hbWU7XHJcbiAgbW9kYWxQcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IGRlc2NyaXB0aW9uO1xyXG59XHJcblxyXG5jb25zdCBlZGl0UHJvZmlsZU1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oc2VsZWN0b3JzLnByb2ZpbGVNb2RhbCwgKCkgPT4ge1xyXG4gIGNvbnN0IGlucHV0VmFsdWVzID0gZWRpdFByb2ZpbGVNb2RhbC5nZXRJbnB1dFZhbHVlcygpO1xyXG5cclxuICBjb25zdCBuYW1lID0gaW5wdXRWYWx1ZXMubmFtZTtcclxuICBjb25zdCBkZXNjcmlwdGlvbiA9IGlucHV0VmFsdWVzLmRlc2NyaXB0aW9uO1xyXG5cclxuICB1c2VySW5mby5zZXRQcm9maWxlSW5mbyhuYW1lLCBkZXNjcmlwdGlvbik7XHJcblxyXG4gIGVkaXRQcm9maWxlTW9kYWwuY2xvc2VNb2RhbCgpO1xyXG59KTtcclxuXHJcbmVkaXRQcm9maWxlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZmlsbFByb2ZpbGVGb3JtKCk7XHJcbiAgZWRpdFByb2ZpbGVNb2RhbC5vcGVuTW9kYWwoKTtcclxuICBwcm9maWxlRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG59KTtcclxuXHJcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tTW9kYWwgYWRkQ2FyZCBlbGVtZW50cy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuY29uc3QgbW9kYWxBZGRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGRDYXJkRm9ybVwiKTtcclxuXHJcbmNvbnN0IGFkZENhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIG1vZGFsQWRkRm9ybSk7XHJcbmFkZENhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGFkZENhcmRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKHNlbGVjdG9ycy5hZGRDYXJkTW9kYWwsICgpID0+IHtcclxuICBjb25zdCBjYXJkRGF0YSA9IGFkZENhcmRNb2RhbC5nZXRJbnB1dFZhbHVlcygpO1xyXG5cclxuICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XHJcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbXMoY2FyZCk7XHJcblxyXG4gIGFkZENhcmRNb2RhbC5jbG9zZU1vZGFsKCk7XHJcbn0pO1xyXG5cclxuYWRkQ2FyZE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRDYXJkTW9kYWwub3Blbk1vZGFsKCk7XHJcbiAgYWRkQ2FyZEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxufSk7XHJcblxyXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLUNoYW5nZSBwcm9maWxlIHBpY3R1cmUtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG5jb25zdCBwcm9maWxlUGljdHVyZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVQaWN0dXJlRm9ybVwiKTtcclxuY29uc3QgcHJvZmlsZVBpY3R1cmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xyXG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XHJcblxyXG5jb25zdCBwcm9maWxlUGljdHVyZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBzZXR0aW5ncyxcclxuICBwcm9maWxlUGljdHVyZUZvcm1cclxuKTtcclxucHJvZmlsZVBpY3R1cmVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVQaWN0dXJlTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBzZWxlY3RvcnMuY2hhbmdlUHJvZmlsZVBpY3R1cmVNb2RhbCxcclxuICAoKSA9PiB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHByb2ZpbGVQaWN0dXJlTW9kYWwuZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICAgIGNvbnN0IGxpbmsgPSBpbnB1dFZhbHVlcy5saW5rO1xyXG4gICAgcHJvZmlsZVBpY3R1cmUuc3JjID0gbGluaztcclxuICAgIHByb2ZpbGVQaWN0dXJlLmFsdCA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xyXG5cclxuICAgIHByb2ZpbGVQaWN0dXJlTW9kYWwuY2xvc2VNb2RhbCgpO1xyXG4gIH1cclxuKTtcclxuXHJcbnByb2ZpbGVQaWN0dXJlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbnByb2ZpbGVQaWN0dXJlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHByb2ZpbGVQaWN0dXJlTW9kYWwub3Blbk1vZGFsKCk7XHJcbiAgcHJvZmlsZUZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxufSk7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcblxyXG4gICAgdGhpcy5fY2FyZFByZXZpZXdJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9fcHJldmlldy1pbWFnZVwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fY2FyZFByZXZpZXdUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9fcHJldmlldy10aXRsZVwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgb3Blbk1vZGFsKHsgbGluaywgbmFtZSB9KSB7XHJcbiAgICB0aGlzLl9jYXJkUHJldmlld0ltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9jYXJkUHJldmlld0ltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9jYXJkUHJldmlld1RpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcclxuXHJcbiAgICBzdXBlci5vcGVuTW9kYWwoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2godGhpcy5fcmVuZGVyZXIpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbXMoZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcihwcm9maWxlTmFtZVNlbGVjdG9yLCBwcm9maWxlRGVzY3JpcHRpb25TZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcHJvZmlsZU5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlTmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvclxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHNldFByb2ZpbGVJbmZvKG5hbWUsIGRlc2NyaXB0aW9uKSB7XHJcbiAgICB0aGlzLl9wcm9maWxlTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0UHJvZmlsZUluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibSIsIm8iLCJvYmoiLCJwcm9wIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwicCIsImIiLCJkb2N1bWVudCIsImJhc2VVUkkiLCJzZWxmIiwibG9jYXRpb24iLCJocmVmIiwiaW5pdGlhbENhcmRzIiwibmFtZSIsImxpbmsiLCJVUkwiLCJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiY2FyZFNlbGVjdG9yIiwiZGF0YSIsImhhbmRsZUNhcmRDbGljayIsImRlbGV0ZUNhcmRNb2RhbCIsInRoaXMiLCJfY2FyZEhlYXJ0QnV0dG9uIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX2RlbGV0ZUNhcmRNb2RhbCIsIm9wZW5Nb2RhbCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZURlbGV0ZUNvbmZpcm0iLCJfY2FyZEVsZW1lbnQiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2xpbmsiLCJfbmFtZSIsIl9jYXJkU2VsZWN0b3IiLCJfY2FyZFRlbXBsYXRlIiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImJpbmQiLCJjYXJkRWxlbWVudCIsInJlbW92ZSIsImNsb3NlTW9kYWwiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUhlYXJ0SWNvbiIsIl9jYXJkRGVsZXRlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfY2FyZEltYWdlIiwiX2hhbmRsZVByZXZpZXdQaWN0dXJlIiwiZ2V0VmlldyIsImNsb25lTm9kZSIsIl9jYXJkVGl0bGUiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsIl9mb3JtIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9pbnB1dEVscyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlRWwiLCJpZCIsImFkZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0IiwiZXZlcnkiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImRpc2FibGVkIiwiZm9yRWFjaCIsImUiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2V4aXRCdXR0b25FbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwiX2hhbmRsZU91dHNpZGVDbG9zZSIsImV2ZW50Iiwia2V5IiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiZXZ0IiwiZ2V0SW5wdXRWYWx1ZXMiLCJfbW9kYWxGb3JtIiwiX21vZGFsRm9ybUlucHV0cyIsIl9tb2RhbEZvcm1CdXR0b24iLCJfaGFuZGxlU3VibWl0IiwiaW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwicmVzZXQiLCJjYXJkUHJldmlld1BvcHVwIiwiX2NhcmRQcmV2aWV3SW1hZ2UiLCJfY2FyZFByZXZpZXdUaXRsZSIsImNyZWF0ZUNhcmQiLCJpdGVtIiwiY2FyZFNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJhZGRJdGVtcyIsImVsZW1lbnQiLCJwcmVwZW5kIiwiY2FyZCIsInByb2ZpbGVFZGl0QnV0dG9uIiwiYWRkQnV0dG9uIiwicHJvZmlsZVBpY3R1cmVFZGl0QnV0dG9uIiwibW9kYWxQcm9maWxlRm9ybSIsIm1vZGFsUHJvZmlsZU5hbWVJbnB1dCIsIm1vZGFsUHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJ1c2VySW5mbyIsInByb2ZpbGVOYW1lU2VsZWN0b3IiLCJwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvciIsIl9wcm9maWxlTmFtZUVsZW1lbnQiLCJfcHJvZmlsZURlc2NyaXB0aW9uRWxlbWVudCIsInNldFByb2ZpbGVJbmZvIiwiZGVzY3JpcHRpb24iLCJnZXRQcm9maWxlSW5mbyIsInByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiZWRpdFByb2ZpbGVNb2RhbCIsImZpbGxQcm9maWxlRm9ybSIsImFkZENhcmRGb3JtVmFsaWRhdG9yIiwiYWRkQ2FyZE1vZGFsIiwicHJvZmlsZVBpY3R1cmVGb3JtIiwicHJvZmlsZVBpY3R1cmUiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVQaWN0dXJlTW9kYWwiXSwic291cmNlUm9vdCI6IiJ9
!function(){"use strict";var e={960:function(e,t,r){e.exports=r.p+"df100efc54d4645073d7.jpg"},656:function(e,t,r){e.exports=r.p+"8edfe6cd78e39aafc871.jpg"},822:function(e,t,r){e.exports=r.p+"44e6fede87f55e5327cc.jpg"},328:function(e,t,r){e.exports=r.p+"e463b225f0897d749d63.jpg"},994:function(e,t,r){e.exports=r.p+"70aac30a40409c4dbc71.jpg"},339:function(e,t,r){e.exports=r.p+"2e37fd0c260a298af732.jpg"}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,r),o.exports}r.m=e,r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.b=document.baseURI||self.location.href,function(){const e=[{name:"Yosemite Valley",link:new URL(r(339),r.b)},{name:"Lake Louise",link:new URL(r(822),r.b)},{name:"Bald Mountains",link:new URL(r(960),r.b)},{name:"Latemar",link:new URL(r(328),r.b)},{name:"Vanoise National Park",link:new URL(r(994),r.b)},{name:"Lago di Braies",link:new URL(r(656),r.b)}],t={formSelector:".modal__form",inputSelector:".modal__form-input",submitButtonSelector:".modal__form-button",inactiveButtonClass:"modal__form-button_disabled",inputErrorClass:"modal__form-input_type_error",errorClass:"modal__error_visible"};class i{constructor(e){this._popupElement=document.querySelector(e),this._exitButtonElement=this._popupElement.querySelector(".modal__exit-button"),this._handleEscClose=this._handleEscClose.bind(this)}openModal(){this._popupElement.classList.add("modal__opened"),document.addEventListener("keyup",this._handleEscClose)}closeModal(){this._popupElement.classList.remove("modal__opened"),document.removeEventListener("keyup",this._handleEscClose)}setEventListeners(){this._popupElement.addEventListener("mousedown",this._handleOutsideClose.bind(this)),this._exitButtonElement.addEventListener("click",this.closeModal.bind(this))}_handleEscClose(e){"Escape"==e.key&&this.closeModal()}_handleOutsideClose(e){e.target.classList.contains("modal")&&this.closeModal()}}class n extends i{constructor(e,t){var r,i,n;super(e),r=this,n=e=>{e.preventDefault(),this._handleFormSubmit(this.getInputValues())},(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(i="_handleSubmit"))in r?Object.defineProperty(r,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[i]=n,this._handleFormSubmit=t,this._modalForm=this._popupElement.querySelector(".modal__form"),this._modalFormInputs=this._popupElement.querySelectorAll(".modal__form-input"),this._modalFormButton=this._popupElement.querySelector(".modal__form-button")}setEventListeners(){super.setEventListeners(),this._modalForm.addEventListener("submit",this._handleSubmit)}getInputValues(){const e={};return this._modalFormInputs.forEach((t=>e[t.name]=t.value)),e}closeModal(){super.closeModal(),this._modalForm.reset()}}function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(e,t){let{data:r,handleCardClick:i}=e;o(this,"_handleHeartIcon",(()=>{this._cardHeartButton.classList.toggle("card__heart-button-active")})),o(this,"_handleDeleteCard",(()=>{this._deleteCardModal.openModal(),this._deleteCardModal._handleFormSubmit=()=>{this._handleDeleteConfirm(this._cardElement)}})),o(this,"_handlePreviewPicture",(()=>{this._handleCardClick.openModal({link:this._link,name:this._name})})),this._name=r.name,this._link=r.link,this._cardSelector=t,this._handleCardClick=i,this._cardTemplate=document.querySelector(this._cardSelector).content.firstElementChild,this._deleteCardModal=new n("#confirmation",this._handleDeleteConfirm.bind(this)),this._deleteCardModal.setEventListeners()}_handleDeleteConfirm(e){e.remove(),this._deleteCardModal.closeModal()}_setEventListeners(){this._cardHeartButton.addEventListener("click",this._handleHeartIcon),this._cardDeleteButton.addEventListener("click",this._handleDeleteCard),this._cardImage.addEventListener("click",this._handlePreviewPicture)}getView(){return this._cardElement=this._cardTemplate.cloneNode(!0),this._cardTitle=this._cardElement.querySelector(".card__title"),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardHeartButton=this._cardElement.querySelector(".card__heart-button"),this._cardDeleteButton=this._cardElement.querySelector(".card__delete-button"),this._setEventListeners(),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardTitle.textContent=this._name,this._cardElement}}class l{constructor(e,t){this._form=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._form.querySelector("#"+e.id+"-error");e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector("#"+e.id+"-error");e.classList.remove(this._inputErrorClass),t.textContent=" ",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}toggleButtonState(){if(this._hasInvalidInput())return this._submitButton.classList.add(this._inactiveButtonClass),void(this._submitButton.disabled=!0);this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_setEventListeners(){this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}const a=new class extends i{constructor(e){super(e),this._cardPreviewImage=this._popupElement.querySelector(".modal__preview-image"),this._cardPreviewTitle=this._popupElement.querySelector(".modal__preview-title")}openModal(e){let{link:t,name:r}=e;this._cardPreviewImage.src=t,this._cardPreviewImage.alt=r,this._cardPreviewTitle.textContent=r,super.openModal()}}("#image-preview");function d(e){return new s({data:e,handleCardClick:a},"#card-template").getView()}a.setEventListeners();const c=new class{constructor(e,t){let{items:r,renderer:i}=e;this._items=r,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._items.forEach(this._renderer)}addItems(e){this._container.prepend(e)}}({items:e,renderer:e=>{const t=d(e);c.addItems(t)}},".cards__list");c.renderItems();const u=document.querySelector(".profile__edit-button"),_=document.querySelector(".profile__add-button"),m=document.querySelector(".profile__image-edit"),h=document.querySelector("#editProfileForm"),p=document.querySelector("#profileName"),f=document.querySelector("#profileDescription"),v=new class{constructor(e,t){this._profileNameElement=document.querySelector(e),this._profileDescriptionElement=document.querySelector(t)}setProfileInfo(e,t){this._profileNameElement.textContent=e,this._profileDescriptionElement.textContent=t}getProfileInfo(){return{name:this._profileNameElement.textContent,description:this._profileDescriptionElement.textContent}}}(".profile__title",".profile__description"),E=new l(t,h);E.enableValidation();const b=new n("#profileEdit",(()=>{const e=b.getInputValues(),t=e.name,r=e.description;v.setProfileInfo(t,r),b.closeModal()}));b.setEventListeners(),u.addEventListener("click",(()=>{!function(){const{name:e,description:t}=v.getProfileInfo();p.value=e,f.value=t}(),b.openModal(),E.toggleButtonState()}));const S=new l(t,document.querySelector("#addCardForm"));S.enableValidation();const y=new n("#addCard",(()=>{const e=d(y.getInputValues());c.addItems(e),y.closeModal()}));y.setEventListeners(),_.addEventListener("click",(()=>{y.openModal(),S.toggleButtonState()}));const C=new l(t,document.querySelector("#ProfilePictureForm"));C.enableValidation();const g=new n("#changeProfilePicture",(()=>{g.closeModal()}));g.setEventListeners(),m.addEventListener("click",(()=>{g.openModal(),C.toggleButtonState()}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y2svYm9vdHN0cmFwIiwid2VicGFjazovL3ByYWN0aWN1bS1wcm9qZWN0LTgvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9wcmFjdGljdW0tcHJvamVjdC04L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3ByYWN0aWN1bS1wcm9qZWN0LTgvd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLXByb2plY3QtOC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLXByb2plY3QtOC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS1wcm9qZWN0LTgvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS1wcm9qZWN0LTgvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS1wcm9qZWN0LTgvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS1wcm9qZWN0LTgvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLXByb2plY3QtOC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS1wcm9qZWN0LTgvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS1wcm9qZWN0LTgvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsIl9fd2VicGFja19yZXF1aXJlX18uYiA9IGRvY3VtZW50LmJhc2VVUkkgfHwgc2VsZi5sb2NhdGlvbi5ocmVmO1xuXG4vLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuLy8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4vLyBbcmVzb2x2ZSwgcmVqZWN0LCBQcm9taXNlXSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbnZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG5cdDE3OTogMFxufTtcblxuLy8gbm8gY2h1bmsgb24gZGVtYW5kIGxvYWRpbmdcblxuLy8gbm8gcHJlZmV0Y2hpbmdcblxuLy8gbm8gcHJlbG9hZGVkXG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3RcblxuLy8gbm8gb24gY2h1bmtzIGxvYWRlZFxuXG4vLyBubyBqc29ucCBmdW5jdGlvbiIsImNvbnN0IHlvc2VtaXRlVmFsbGV5SW1hZ2UgPSBuZXcgVVJMKFxyXG4gIFwiLi4vaW1hZ2VzL3lvc2VtaXRlLXZhbGxleS5qcGdcIixcclxuICBpbXBvcnQubWV0YS51cmxcclxuKTtcclxuY29uc3QgbGFrZUxvdWlzZUltYWdlID0gbmV3IFVSTChcIi4uL2ltYWdlcy9sYWtlLWxvdWlzZS5qcGdcIiwgaW1wb3J0Lm1ldGEudXJsKTtcclxuY29uc3QgYmFsZE1vdW50YWluSW1hZ2UgPSBuZXcgVVJMKFxyXG4gIFwiLi4vaW1hZ2VzL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIGltcG9ydC5tZXRhLnVybFxyXG4pO1xyXG5jb25zdCBsYXRlbWFySW1hZ2UgPSBuZXcgVVJMKFwiLi4vaW1hZ2VzL2xhdGVtYXIuanBnXCIsIGltcG9ydC5tZXRhLnVybCk7XHJcbmNvbnN0IHZhbm9pc2VOYXRpb25hbFBhcmtJbWFnZSA9IG5ldyBVUkwoXHJcbiAgXCIuLi9pbWFnZXMvdmFub2lzZS1uYXRpb25hbC1wYXJrLmpwZ1wiLFxyXG4gIGltcG9ydC5tZXRhLnVybFxyXG4pO1xyXG5jb25zdCBsYWdvRGlCcmFpZXNJbWFnZSA9IG5ldyBVUkwoXHJcbiAgXCIuLi9pbWFnZXMvbGFnby1kaS1icmFpZXMuanBnXCIsXHJcbiAgaW1wb3J0Lm1ldGEudXJsXHJcbik7XHJcblxyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiB5b3NlbWl0ZVZhbGxleUltYWdlLFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IGxha2VMb3Vpc2VJbWFnZSxcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBiYWxkTW91bnRhaW5JbWFnZSxcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IGxhdGVtYXJJbWFnZSxcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogdmFub2lzZU5hdGlvbmFsUGFya0ltYWdlLFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IGxhZ29EaUJyYWllc0ltYWdlLFxyXG4gIH0sXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtLWlucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtLWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2Zvcm0tYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19mb3JtLWlucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzID0ge1xyXG4gIGNhcmRTZWN0aW9uOiBcIi5jYXJkc19fbGlzdFwiLFxyXG4gIGNhcmRUZW1wbGF0ZTogXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gIHByZXZpZXdQb3B1cDogXCIjaW1hZ2UtcHJldmlld1wiLFxyXG4gIHByb2ZpbGVNb2RhbDogXCIjcHJvZmlsZUVkaXRcIixcclxuICBhZGRDYXJkTW9kYWw6IFwiI2FkZENhcmRcIixcclxuICBjb25maXJtYXRpb25Nb2RhbDogXCIjY29uZmlybWF0aW9uXCIsXHJcbiAgY2hhbmdlUHJvZmlsZVBpY3R1cmVNb2RhbDogXCIjY2hhbmdlUHJvZmlsZVBpY3R1cmVcIixcclxuICBwcm9maWxlTmFtZTogXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICBwcm9maWxlQWJvdXQ6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgYXBpQmFzZVVybCA9IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGFwaVJlcXVlc3RPcHRpb25zID0ge1xyXG4gIGF1dGhvcml6YXRpb246IFwiMjMzNzYwYjItODY1Yi00MThjLWE5ODgtMGE1ZGFhYWY3ODQ2XCIsXHJcbiAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxufTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9leGl0QnV0dG9uRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9fZXhpdC1idXR0b25cIlxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBvcGVuTW9kYWwoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX19vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2VNb2RhbCgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICAvL3RoaXMuX21vZGFsRm9ybS5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgXCJtb3VzZWRvd25cIixcclxuICAgICAgdGhpcy5faGFuZGxlT3V0c2lkZUNsb3NlLmJpbmQodGhpcylcclxuICAgICk7XHJcbiAgICB0aGlzLl9leGl0QnV0dG9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICBcImNsaWNrXCIsXHJcbiAgICAgIHRoaXMuY2xvc2VNb2RhbC5iaW5kKHRoaXMpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KSB7XHJcbiAgICBpZiAoZXZlbnQua2V5ID09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZU1vZGFsKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlT3V0c2lkZUNsb3NlKGV2ZW50KSB7XHJcbiAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2VNb2RhbCgpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuXHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX21vZGFsRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5fbW9kYWxGb3JtSW5wdXRzID1cclxuICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2Zvcm0taW5wdXRcIik7XHJcbiAgICB0aGlzLl9tb2RhbEZvcm1CdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2Zvcm0tYnV0dG9uXCJcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9tb2RhbEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVTdWJtaXQpO1xyXG4gIH1cclxuXHJcbiAgXHJcbiAgZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5fbW9kYWxGb3JtSW5wdXRzLmZvckVhY2goXHJcbiAgICAgIChpbnB1dCkgPT4gKGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuICBcclxuXHJcbiAgX2hhbmRsZVN1Ym1pdCA9IChldnQpID0+IHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLmdldElucHV0VmFsdWVzKCkpO1xyXG4gIH07XHJcblxyXG4gIGNsb3NlTW9kYWwoKSB7XHJcbiAgICBzdXBlci5jbG9zZU1vZGFsKCk7XHJcbiAgICB0aGlzLl9tb2RhbEZvcm0ucmVzZXQoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4vUG9wdXBXaXRoRm9ybVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoeyBkYXRhLCBoYW5kbGVDYXJkQ2xpY2sgfSwgY2FyZFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuXHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcblxyXG4gICAgdGhpcy5fY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fY2FyZFNlbGVjdG9yXHJcbiAgICApLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcblxyXG5cclxuICAgIC8vZGVsZXRlY2FyZE1vZGFsXHJcbiAgICB0aGlzLl9kZWxldGVDYXJkTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICAgICAgXCIjY29uZmlybWF0aW9uXCIsXHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNvbmZpcm0uYmluZCh0aGlzKVxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9kZWxldGVDYXJkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgX2hhbmRsZURlbGV0ZUNvbmZpcm0oKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2RlbGV0ZUNhcmRNb2RhbC5jbG9zZU1vZGFsKCk7XHJcbiAgfVxyXG4gICovXHJcblxyXG4gIF9oYW5kbGVEZWxldGVDb25maXJtKGNhcmRFbGVtZW50KSB7XHJcbiAgICBjYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2RlbGV0ZUNhcmRNb2RhbC5jbG9zZU1vZGFsKCk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAvL0xpa2UgYnV0dG9uXHJcbiAgICB0aGlzLl9jYXJkSGVhcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUhlYXJ0SWNvbik7XHJcblxyXG4gICAgLy9kZWxldGUgYnV0dG9uXHJcbiAgICB0aGlzLl9jYXJkRGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKTtcclxuXHJcbiAgICAvL21vZGFsIHByZXZpZXdcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlUHJldmlld1BpY3R1cmUpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUhlYXJ0SWNvbiA9ICgpID0+IHtcclxuICAgIHRoaXMuX2NhcmRIZWFydEJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9faGVhcnQtYnV0dG9uLWFjdGl2ZVwiKTtcclxuICB9O1xyXG5cclxuICAvKlxyXG4gIF9oYW5kbGVEZWxldGVDYXJkID0gKCkgPT4ge1xyXG4gICAgLy90aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2RlbGV0ZUNhcmRNb2RhbC5vcGVuTW9kYWwoKTtcclxuICB9O1xyXG4gICovXHJcblxyXG4gIF9oYW5kbGVEZWxldGVDYXJkID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fZGVsZXRlQ2FyZE1vZGFsLm9wZW5Nb2RhbCgpO1xyXG4gICAgdGhpcy5fZGVsZXRlQ2FyZE1vZGFsLl9oYW5kbGVGb3JtU3VibWl0ID0gKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDb25maXJtKHRoaXMuX2NhcmRFbGVtZW50KTtcclxuICAgIH07XHJcbiAgfTtcclxuXHJcbiAgX2hhbmRsZVByZXZpZXdQaWN0dXJlID0gKCkgPT4ge1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrLm9wZW5Nb2RhbCh7IGxpbms6IHRoaXMuX2xpbmssIG5hbWU6IHRoaXMuX25hbWUgfSk7XHJcbiAgfTtcclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fY2FyZFRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FyZEhlYXJ0QnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuY2FyZF9faGVhcnQtYnV0dG9uXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9jYXJkRGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcclxuXHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xyXG5cclxuICAgIHRoaXMuX2lucHV0RWxzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiI1wiICsgaW5wdXRFbGVtZW50LmlkICsgXCItZXJyb3JcIlxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIjXCIgKyBpbnB1dEVsZW1lbnQuaWQgKyBcIi1lcnJvclwiXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCIgXCI7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxzLmV2ZXJ5KChpbnB1dEVsZW1lbnQpID0+IGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcblxyXG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMsIHNlbGVjdG9ycywgc2V0dGluZ3MgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5cclxuLy9jb25zdCBhcGkgPSBuZXcgQXBpXHJcblxyXG5jb25zdCBjYXJkUHJldmlld1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHNlbGVjdG9ycy5wcmV2aWV3UG9wdXApO1xyXG5jYXJkUHJldmlld1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGl0ZW0pIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICB7XHJcbiAgICAgIGRhdGE6IGl0ZW0sXHJcbiAgICAgIGhhbmRsZUNhcmRDbGljazogY2FyZFByZXZpZXdQb3B1cCxcclxuICAgIH0sXHJcbiAgICBzZWxlY3RvcnMuY2FyZFRlbXBsYXRlXHJcbiAgKTtcclxuICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7XHJcbn1cclxuXHJcbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuICAgIHJlbmRlcmVyOiAoZGF0YSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChkYXRhKTtcclxuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbXMoY2FyZCk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgc2VsZWN0b3JzLmNhcmRTZWN0aW9uXHJcbik7XHJcblxyXG5jYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG5cclxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tUHJvZmlsZSBlbGVtZW50cy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5jb25zdCBwcm9maWxlSW1hZ2VFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbWFnZS1lZGl0XCIpO1xyXG5cclxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1Nb2RhbCBQcm9maWxlIGVsZW1lbnRzLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5jb25zdCBtb2RhbFByb2ZpbGVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0UHJvZmlsZUZvcm1cIik7XHJcbmNvbnN0IG1vZGFsUHJvZmlsZU5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZU5hbWVcIik7XHJcbmNvbnN0IG1vZGFsUHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI3Byb2ZpbGVEZXNjcmlwdGlvblwiXHJcbik7XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhzZWxlY3RvcnMucHJvZmlsZU5hbWUsIHNlbGVjdG9ycy5wcm9maWxlQWJvdXQpO1xyXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBtb2RhbFByb2ZpbGVGb3JtKTtcclxucHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuZnVuY3Rpb24gZmlsbFByb2ZpbGVGb3JtKCkge1xyXG4gIGNvbnN0IHsgbmFtZSwgZGVzY3JpcHRpb24gfSA9IHVzZXJJbmZvLmdldFByb2ZpbGVJbmZvKCk7XHJcbiAgbW9kYWxQcm9maWxlTmFtZUlucHV0LnZhbHVlID0gbmFtZTtcclxuICBtb2RhbFByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gZGVzY3JpcHRpb247XHJcbn1cclxuXHJcbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShzZWxlY3RvcnMucHJvZmlsZU1vZGFsLCAoKSA9PiB7XHJcbiAgY29uc3QgaW5wdXRWYWx1ZXMgPSBlZGl0UHJvZmlsZU1vZGFsLmdldElucHV0VmFsdWVzKCk7XHJcblxyXG4gIGNvbnN0IG5hbWUgPSBpbnB1dFZhbHVlcy5uYW1lO1xyXG4gIGNvbnN0IGRlc2NyaXB0aW9uID0gaW5wdXRWYWx1ZXMuZGVzY3JpcHRpb247XHJcblxyXG4gIHVzZXJJbmZvLnNldFByb2ZpbGVJbmZvKG5hbWUsIGRlc2NyaXB0aW9uKTtcclxuXHJcbiAgZWRpdFByb2ZpbGVNb2RhbC5jbG9zZU1vZGFsKCk7XHJcbn0pO1xyXG5cclxuZWRpdFByb2ZpbGVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBmaWxsUHJvZmlsZUZvcm0oKTtcclxuICBlZGl0UHJvZmlsZU1vZGFsLm9wZW5Nb2RhbCgpO1xyXG4gIHByb2ZpbGVGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbn0pO1xyXG5cclxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1Nb2RhbCBhZGRDYXJkIGVsZW1lbnRzLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5jb25zdCBtb2RhbEFkZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZENhcmRGb3JtXCIpO1xyXG5cclxuY29uc3QgYWRkQ2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgbW9kYWxBZGRGb3JtKTtcclxuYWRkQ2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgYWRkQ2FyZE1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oc2VsZWN0b3JzLmFkZENhcmRNb2RhbCwgKCkgPT4ge1xyXG4gIGNvbnN0IGNhcmREYXRhID0gYWRkQ2FyZE1vZGFsLmdldElucHV0VmFsdWVzKCk7XHJcblxyXG4gIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGNhcmREYXRhKTtcclxuICBjYXJkU2VjdGlvbi5hZGRJdGVtcyhjYXJkKTtcclxuXHJcbiAgYWRkQ2FyZE1vZGFsLmNsb3NlTW9kYWwoKTtcclxufSk7XHJcblxyXG5hZGRDYXJkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZENhcmRNb2RhbC5vcGVuTW9kYWwoKTtcclxuICBhZGRDYXJkRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG59KTtcclxuXHJcblxyXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLUNoYW5nZSBQcm9maWxlIFBpY3R1cmUgZWxlbWVudHMgZWxlbWVudHMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbmNvbnN0IG1vZGFsUHJvZmlsZVBpY3R1cmVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNQcm9maWxlUGljdHVyZUZvcm1cIik7XHJcblxyXG5jb25zdCBwcm9maWxlUGljdHVyZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgbW9kYWxQcm9maWxlUGljdHVyZUZvcm0pO1xyXG5wcm9maWxlUGljdHVyZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuXHJcbmNvbnN0IHByb2ZpbGVQaWN0dXJlTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShzZWxlY3RvcnMuY2hhbmdlUHJvZmlsZVBpY3R1cmVNb2RhbCwgKCkgPT4ge1xyXG4gIC8vY29uc3QgaW5wdXRWYWx1ZXMgPSBwcm9maWxlUGljdHVyZU1vZGFsLmdldElucHV0VmFsdWVzKCk7XHJcblxyXG4gIC8vY29uc3QgbmFtZSA9IGlucHV0VmFsdWVzLm5hbWU7XHJcbiAgLy9jb25zdCBkZXNjcmlwdGlvbiA9IGlucHV0VmFsdWVzLmRlc2NyaXB0aW9uO1xyXG5cclxuICAvL3VzZXJJbmZvLnNldFByb2ZpbGVJbmZvKG5hbWUsIGRlc2NyaXB0aW9uKTtcclxuXHJcbiAgcHJvZmlsZVBpY3R1cmVNb2RhbC5jbG9zZU1vZGFsKCk7XHJcbn0pO1xyXG5cclxucHJvZmlsZVBpY3R1cmVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuXHJcbnByb2ZpbGVJbWFnZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwcm9maWxlUGljdHVyZU1vZGFsLm9wZW5Nb2RhbCgpO1xyXG4gIHByb2ZpbGVQaWN0dXJlRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxufSk7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcblxyXG4gICAgdGhpcy5fY2FyZFByZXZpZXdJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9fcHJldmlldy1pbWFnZVwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fY2FyZFByZXZpZXdUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9fcHJldmlldy10aXRsZVwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgb3Blbk1vZGFsKHsgbGluaywgbmFtZSB9KSB7XHJcbiAgICB0aGlzLl9jYXJkUHJldmlld0ltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9jYXJkUHJldmlld0ltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9jYXJkUHJldmlld1RpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcclxuXHJcbiAgICBzdXBlci5vcGVuTW9kYWwoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2godGhpcy5fcmVuZGVyZXIpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbXMoZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcihwcm9maWxlTmFtZVNlbGVjdG9yLCBwcm9maWxlRGVzY3JpcHRpb25TZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcHJvZmlsZU5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlTmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvclxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHNldFByb2ZpbGVJbmZvKG5hbWUsIGRlc2NyaXB0aW9uKSB7XHJcbiAgICB0aGlzLl9wcm9maWxlTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0UHJvZmlsZUluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibSIsIm8iLCJvYmoiLCJwcm9wIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwicCIsImIiLCJkb2N1bWVudCIsImJhc2VVUkkiLCJzZWxmIiwibG9jYXRpb24iLCJocmVmIiwiaW5pdGlhbENhcmRzIiwibmFtZSIsImxpbmsiLCJVUkwiLCJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiUG9wdXAiLCJjb25zdHJ1Y3RvciIsInBvcHVwU2VsZWN0b3IiLCJ0aGlzIiwiX3BvcHVwRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfZXhpdEJ1dHRvbkVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3Blbk1vZGFsIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsb3NlTW9kYWwiLCJyZW1vdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJfaGFuZGxlT3V0c2lkZUNsb3NlIiwiZXZlbnQiLCJrZXkiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiZ2V0SW5wdXRWYWx1ZXMiLCJfbW9kYWxGb3JtIiwiX21vZGFsRm9ybUlucHV0cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfbW9kYWxGb3JtQnV0dG9uIiwiX2hhbmRsZVN1Ym1pdCIsImlucHV0VmFsdWVzIiwiZm9yRWFjaCIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsIkNhcmQiLCJjYXJkU2VsZWN0b3IiLCJkYXRhIiwiaGFuZGxlQ2FyZENsaWNrIiwiX2NhcmRIZWFydEJ1dHRvbiIsInRvZ2dsZSIsIl9kZWxldGVDYXJkTW9kYWwiLCJfaGFuZGxlRGVsZXRlQ29uZmlybSIsIl9jYXJkRWxlbWVudCIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfbGluayIsIl9uYW1lIiwiX2NhcmRTZWxlY3RvciIsIl9jYXJkVGVtcGxhdGUiLCJjb250ZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJjYXJkRWxlbWVudCIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9oYW5kbGVIZWFydEljb24iLCJfY2FyZERlbGV0ZUJ1dHRvbiIsIl9oYW5kbGVEZWxldGVDYXJkIiwiX2NhcmRJbWFnZSIsIl9oYW5kbGVQcmV2aWV3UGljdHVyZSIsImdldFZpZXciLCJjbG9uZU5vZGUiLCJfY2FyZFRpdGxlIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJfZm9ybSIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfaW5wdXRFbHMiLCJfc3VibWl0QnV0dG9uIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlRWwiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0IiwiZXZlcnkiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImRpc2FibGVkIiwiZSIsImVuYWJsZVZhbGlkYXRpb24iLCJjYXJkUHJldmlld1BvcHVwIiwiX2NhcmRQcmV2aWV3SW1hZ2UiLCJfY2FyZFByZXZpZXdUaXRsZSIsImNyZWF0ZUNhcmQiLCJpdGVtIiwiY2FyZFNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJhZGRJdGVtcyIsImVsZW1lbnQiLCJwcmVwZW5kIiwiY2FyZCIsInByb2ZpbGVFZGl0QnV0dG9uIiwiYWRkQnV0dG9uIiwicHJvZmlsZUltYWdlRWRpdEJ1dHRvbiIsIm1vZGFsUHJvZmlsZUZvcm0iLCJtb2RhbFByb2ZpbGVOYW1lSW5wdXQiLCJtb2RhbFByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwidXNlckluZm8iLCJwcm9maWxlTmFtZVNlbGVjdG9yIiwicHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3IiLCJfcHJvZmlsZU5hbWVFbGVtZW50IiwiX3Byb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQiLCJzZXRQcm9maWxlSW5mbyIsImRlc2NyaXB0aW9uIiwiZ2V0UHJvZmlsZUluZm8iLCJwcm9maWxlRm9ybVZhbGlkYXRvciIsImVkaXRQcm9maWxlTW9kYWwiLCJmaWxsUHJvZmlsZUZvcm0iLCJhZGRDYXJkRm9ybVZhbGlkYXRvciIsImFkZENhcmRNb2RhbCIsInByb2ZpbGVQaWN0dXJlRm9ybVZhbGlkYXRvciIsInByb2ZpbGVQaWN0dXJlTW9kYWwiXSwic291cmNlUm9vdCI6IiJ9